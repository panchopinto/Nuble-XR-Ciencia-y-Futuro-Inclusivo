<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>√ëuble XR ‚Äî Ciencia y Futuro Inclusivo (PIE & PAES)</title>
<script src="auth.js" defer></script>
<meta name="color-scheme" content="dark">
<style>
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:#0a1020;color:#eaf2ff;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
       background-image: radial-gradient(1200px 600px at 20% -10%, rgba(26,42,108,.18), transparent);}
  a{text-decoration:none;color:inherit}
  img{display:block;max-width:100%}
  header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg, #0a1020ee, #0a1020bb, transparent);backdrop-filter:blur(6px);border-bottom:1px solid #1e2a44}
  .wrap{max-width:1100px;margin:0 auto;padding:20px}
  .hero{padding:28px 20px 8px}
  .title{font-weight:900;letter-spacing:.2px;font-size:36px;margin:0 0 6px}
  .subtitle{margin:0;color:#a9b4d0}
  .badges{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
  .badge{background:linear-gradient(135deg,#1f2a44,#152038);border:1px solid #263454;border-radius:999px;padding:6px 12px;font-size:12px;color:#cfe0ff}
  .ribbon{margin-top:14px;height:8px;border-radius:999px;background:linear-gradient(90deg,#6EE7F9,#A78BFA,#F472B6,#FDE68A);
          background-size:200% 100%;animation:slide 8s linear infinite;box-shadow:0 2px 12px rgba(0,0,0,.25);opacity:.95}
  @keyframes slide{0%{background-position:0% 0}100%{background-position:200% 0}}
  .cta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .cta{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;background:linear-gradient(135deg,#6EE7F9,#A78BFA);
       color:#0a1020;font-weight:800;border:0}
  .cta .icon,.btn .icon{width:16px;height:16px;border-radius:4px;background:conic-gradient(from 45deg,#6EE7F9,#A78BFA,#F472B6,#FDE68A,#6EE7F9)}
  #collab-note{margin:15px 0;padding:12px;background:#111a2e;border:1px solid #1e2a44;border-radius:10px;color:#cfe0ff}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px;padding:20px}
  .card{background:rgba(255,255,255,0.06);border:1px solid #223054;border-radius:16px;overflow:hidden;box-shadow:0 10px 30px #0008;transition:transform .2s, box-shadow .2s;position:relative}
  .card:hover{transform:translateY(-4px);box-shadow:0 14px 40px #000a}
  .thumb{width:100%;height:160px;object-fit:cover;filter:saturate(1.08) contrast(1.05)}
  .card-body{padding:14px}
  .card h3{margin:4px 0 8px;font-size:18px}
  .card p{margin:0;color:#a9b4d0;min-height:36px}
  .actions{display:flex;align-items:center;justify-content:space-between;margin-top:12px;gap:10px;flex-wrap:wrap}
  .btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,#8bdcff,#ffffff33);color:#0a1020;font-weight:800;
       padding:10px 14px;border-radius:12px;border:1px solid #ffffff88;box-shadow:inset 0 0 0 1px #0002, 0 6px 16px #0009}
  .tags span{display:inline-block;background:rgba(255,255,255,0.12);border:1px solid #2a3a60;padding:6px 10px;border-radius:999px;font-size:11px;color:#cfe0ff;margin-left:6px}
  #gate{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#0009;z-index:9999}
  #gate .card{background:#101a34;border:1px solid #223054;border-radius:14px;max-width:520px;width:96%;padding:18px;color:#cfe0ff}
  #gate label{display:block;font-size:13px;color:#cfe0ff;margin-top:10px}
  #gate input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #2a3a60;background:#0b1328;color:#eaf2ff}
  #gate .row{display:flex;gap:10px;align-items:center;margin-top:14px;justify-content:space-between}
  #gate button{background:linear-gradient(135deg,#6EE7F9,#A78BFA);color:#0a1020;font-weight:800;border:none;border-radius:10px;padding:10px 14px;cursor:pointer;box-shadow:0 6px 16px #000a}

  .corner-badge{position:absolute;left:8px;top:8px;background:linear-gradient(135deg,#6EE7F9,#A78BFA);color:#0a1020;
    font-weight:800;font-size:12px;border-radius:999px;padding:4px 8px;box-shadow:0 6px 16px #0009}

  /* brand-header */
  .appbar{position:sticky;top:0;z-index:20;background:linear-gradient(180deg, #0a1020ee, #0a1020cc, transparent);
          backdrop-filter: blur(8px); border-bottom:1px solid #1e2a44}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:42px;height:42px;border-radius:12px;background:conic-gradient(from 45deg,#6EE7F9,#A78BFA,#F472B6,#FDE68A,#6EE7F9);
        box-shadow:0 6px 20px #0007;position:relative}
  .logo::after{content:"XR";position:absolute;inset:0;display:grid;place-items:center;
               color:#0a1020;font-weight:900;font-size:14px;mix-blend-mode:screen}
  .hero{position:relative;overflow:hidden;padding:28px 20px 12px}
  .mesh{position:absolute;inset:-20%;background:radial-gradient(1200px 600px at 20% -10%, rgba(26,42,108,.22), transparent),
                           radial-gradient(900px 500px at 110% 10%, rgba(167,139,250,.18), transparent),
                           radial-gradient(800px 500px at -10% 120%, rgba(110,231,249,.14), transparent);
        filter:saturate(1.05);animation:float 18s ease-in-out infinite alternate;pointer-events:none}
  @keyframes float{from{transform:translateY(-6px)}to{transform:translateY(6px)}}
  .wave{position:absolute;left:0;right:0;bottom:-1px;height:24px}
  .wave svg{display:block;width:100%;height:100%}
  .cta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .cta{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;background:linear-gradient(135deg,#6EE7F9,#A78BFA);
       color:#0a1020;font-weight:800;border:0}
  .subtitle{margin:0;color:#a9b4d0}
  .title{display:flex;align-items:baseline;gap:10px}
  .title .sup{font-size:12px;font-weight:700;color:#9db0d6;border:1px solid #263454;border-radius:999px;padding:3px 8px}

  <style>
    /* admin-fab */
    .adminFab{position:fixed;right:14px;bottom:14px;display:none;z-index:9998;
      background:#101a34;border:1px solid #223054;border-radius:14px;box-shadow:0 10px 30px #000a;
      padding:8px;gap:8px;align-items:center}
    .adminFab button{background:linear-gradient(135deg,#6EE7F9,#A78BFA);color:#0a1020;border:0;border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}
    .adminFab .email{font-size:12px;color:#cfe0ff;margin-right:6px}
  
  .btn .btn-ico{width:18px;height:18px;display:inline-block;vertical-align:middle;border-radius:4px;background:#ffffffaa}
  .btn .btn-ico img{width:18px;height:18px;display:block;border-radius:4px}
</style>


  .btn .btn-ico{width:18px;height:18px;display:inline-block;vertical-align:middle;border-radius:4px;background:#ffffffaa}
  .btn .btn-ico img{width:18px;height:18px;display:block;border-radius:4px}
</style>
</head>
<body>
  
  <header class="appbar">
    <div class="wrap hero">
      <div class="mesh"></div>
      <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:16px;flex-wrap:wrap">
        <div class="brand">
          <div class="logo"></div>
          <div>
            <h1 class="title"><span>√ëuble XR</span> <span class="sup">PIE &amp; PAES</span></h1>
            <p class="subtitle">Ciencia y Futuro Inclusivo ‚Äî 10 proyectos VR/AR/3D con ‚Äúc√©lulas‚Äù y trivias.</p>
          </div>
        </div>
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <div class="badge">WebXR</div>
          <div class="badge">10 proyectos</div>
          <div class="badge">Listos para clase</div>
        </div>
      </div>

      <div id="collab-note">Proyecto colaborativo con <strong>Bel√©n Acu√±a</strong> (PIE, Sala SEM Tecnol√≥gica: 2 estaciones HTC VR, pantalla t√°ctil gigante y 15 Oculus Quest 2).</div>

      <div class="cta-row">
        <a class="cta" href="#proyectos"><span class="icon"></span> Ver proyectos</a>
        <div id="admin-link" style="display:none"><a class="cta" href="acciones.html"><span class="icon"></span> ‚öôÔ∏è Acciones (admin)</a></div>
      </div>

      <div class="wave">
        <svg viewBox="0 0 1440 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0,40 C180,80 360,20 540,36 C720,52 900,96 1080,72 C1260,48 1440,0 1440,0 L1440,100 L0,100 Z"
                fill="#0a1020"></path>
        </svg>
      </div>
      <div id="admin-email" style="display:none; margin-top:8px; font-size:12px; color:#9db0d6"></div>
    </div>
  </header>
    

  <main class="wrap">
    <section id="proyectos" class="grid"></section>
  </main>

  <div id="gate">
    <div class="card">
      <h2 style="margin:0 0 8px 0">Acceso privado</h2>
      <p style="margin:0 0 12px 0;color:#a9b4d0">Ingresa tu correo autorizado y el c√≥digo.</p>
      <label>Correo</label>
      <input id="gate-email" type="email" placeholder="correo@liceosannicolas.cl"/>
      <label>C√≥digo de acceso</label>
      <input id="gate-code" type="password" placeholder="********"/>
      <div class="row">
        <span style="font-size:12px;color:#9db0d6">Solo usuarios autorizados</span>
        <button onclick="Gate.submit()">Entrar</button>
      </div>
    </div>
  </div>

<script>

const cards = [
  ["nuble-mapa-radar-vr","1. Mapa VR √ëuble (Radar)","PIE: contrastes radar ‚Üî visi√≥n; PAES: lectura de capas."],
  ["nuble-inundaciones-vr","2. Inundaciones y crecidas","PIE: iconos grandes; PAES: interpretaci√≥n de inundaci√≥n."],
  ["nuble-incendios-vr","3. Incendios y recuperaci√≥n","PIE: paleta accesible; PAES: severidad y recuperaci√≥n."],
  ["nuble-cambio-uso-vr","4. Cambio de uso de suelo","PIE: cambio ON/OFF; PAES: an√°lisis temporal ŒîdB."],
  ["nuble-costas-humedales-vr","5. Costas y humedales","PIE: texto claro; PAES: din√°mica de playa y humedales."],
  ["nuble-insar-vr","6. InSAR deformaci√≥n s√≠smica","PIE: leyendas simples; PAES: franjas y desplazamientos."],
  ["nuble-maritimo-vr-ar","7. Tr√°fico mar√≠timo / Acuicultura","PIE: AR colaborativa; PAES: detecci√≥n (CFAR)."],
  ["andes-glaciares-vr-ar","8. Glaciares e h√≠drica","PIE: leyenda de cambio; PAES: hipsometr√≠a ‚Üî agua."],
  ["nuble-energia-riesgos-vr-ar","9. Energ√≠a y riesgos","PIE: categor√≠as n√≠tidas; PAES: riesgo/energ√≠a."],
  ["nuble-agri-inteligente-vr-ar","10. Agricultura inteligente","PIE: anomal√≠a; PAES: priorizaci√≥n de riego."]
];
const grid = document.querySelector('#proyectos');
grid.innerHTML = cards.map(([slug,title,note]) => `
  <article class="card">
    <div class="corner-badge">XR</div>
    <img class="thumb" src="thumbs/icons/${slug}.svg" alt="${title}"/>
    <div class="card-body">
      <h3>${title}</h3>
      <p>${note}</p>
      <div class="actions">
        <a class="btn" data-proj-folder="${slug}" href="#">
          <span class="btn-ico"><img src="thumbs/icons/${slug}.svg" alt="icono ${title}"/></span>
          <span>Ir al proyecto</span>
        </a>
        <a class="btn" href="#" onclick="alert('Abre el proyecto y presiona üß© Actividad o üß† Trivia.');return false;">‚ùì Ayuda</a>
        <span class="tags"><span>VR</span><span>AR</span><span>3D</span></span>
      </div>
    </div>
  </article>
`).join('');

document.addEventListener('DOMContentLoaded', ()=>{
  const ok = localStorage.getItem('nxr_auth')==='1';
  const g = document.getElementById('gate');
  if(!ok){ document.body.classList.add('gated'); g.style.display='flex'; } else { g.style.display='none'; }
});

// context blockers only in protected mode (optional)
document.addEventListener('contextmenu', e => { if(document.body.classList.contains('protected')) e.preventDefault(); });
document.addEventListener('keydown', function(e){
  if(!document.body.classList.contains('protected')) return;
  if((e.ctrlKey&&(e.key==='u'||e.key==='U'||e.key==='s'||e.key==='S'||e.key==='c'||e.key==='C'))||e.key==='F12'||(e.ctrlKey&&e.shiftKey&&(e.key==='I'||e.key==='i'||e.key==='J'||e.key==='j'))){e.preventDefault();e.stopPropagation();alert('Acci√≥n deshabilitada en modo presentaci√≥n.');return false;}
}, true);
</script>

<script>
document.addEventListener("DOMContentLoaded", ()=>{
  try{
    const authed = localStorage.getItem("nxr_auth")==="1";
    const email = (localStorage.getItem("nxr_email")||"").toLowerCase();
    const allowed = (window.NXR_CONFIG && Array.isArray(NXR_CONFIG.allowedEmails)) ? NXR_CONFIG.allowedEmails.map(e=>e.toLowerCase()) : [];
    const ok = authed && email && allowed.includes(email);
    const link = document.getElementById("admin-link");
    const label = document.getElementById("admin-email");
    if(link){ link.style.display = ok ? "block" : "none"; }
    if(label){ label.style.display = ok ? "block" : "none"; if(ok){ label.textContent = "Sesi√≥n: " + email; } }
  }catch(e){}
});
</script>

  <div class="adminFab" id="adminFab">
    <span class="email" id="fabEmail"></span>
    <button id="fabProtect">üõ°Ô∏è Protegido</button>
    <button onclick="location.href='acciones.html'">‚öôÔ∏è Acciones</button>
    <button id="fabLogout">üö™ Salir</button>
  </div>
  <script>
  (function(){
    function reveal(){
      try{
        const authed = localStorage.getItem('nxr_auth')==='1';
        const email = (localStorage.getItem('nxr_email')||'').toLowerCase();
        const allowed = (window.NXR_CONFIG && Array.isArray(NXR_CONFIG.allowedEmails)) ? NXR_CONFIG.allowedEmails.map(e=>e.toLowerCase()) : [];
        const ok = authed && email && allowed.includes(email);
        const fab = document.getElementById('adminFab');
        const lab = document.getElementById('fabEmail');
        if(!fab) return;
        if(ok){
          fab.style.display='flex';
          if(lab) lab.textContent = email;
        }else{
          fab.style.display='none';
        }
      }catch(e){}
    }
    function syncProtectLabel(){
      const on = localStorage.getItem('nxr_protect')==='1';
      const btn = document.getElementById('fabProtect');
      if(btn) btn.textContent = on ? 'üõ°Ô∏è Protegido ON' : 'üõ°Ô∏è Protegido OFF';
      if(on){ document.body.classList.add('protected'); } else { document.body.classList.remove('protected'); }
    }
    document.addEventListener('DOMContentLoaded', ()=>{
      reveal(); syncProtectLabel();
      const p = document.getElementById('fabProtect');
      const l = document.getElementById('fabLogout');
      if(p) p.onclick = ()=>{ if(localStorage.getItem('nxr_protect')==='1'){ localStorage.removeItem('nxr_protect'); } else { localStorage.setItem('nxr_protect','1'); } syncProtectLabel(); };
      if(l) l.onclick = ()=>{ localStorage.removeItem('nxr_auth'); localStorage.removeItem('nxr_email'); location.href='index.html'; };
    });
  })();
  </script>


<script>
document.addEventListener('contextmenu', function(e){ if(document.body.classList.contains('protected')) e.preventDefault(); }, true);
document.addEventListener('keydown', function(e){
  if(!document.body.classList.contains('protected')) return;
  if ((e.ctrlKey && (e.key==='u'||e.key==='U'||e.key==='s'||e.key==='S'||e.key==='c'||e.key==='C'))
       || e.key==='F12' || (e.ctrlKey && e.shiftKey && (e.key==='I'||e.key==='i'||e.key==='J'||e.key==='j'))) {
    e.preventDefault(); e.stopPropagation(); alert('Acci√≥n deshabilitada en modo presentaci√≥n.'); return false;
  }
}, true);
</script>
</body>
</html>
